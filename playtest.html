<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Sparebeat テストプレイ</title>
</head>
<body style="background-color: #cdf; text-align: center;">
    <div style="position: absolute; width: 100%; left: 0;">
        <h2 style="font-size: 30px;">Sparebeatの譜面をテストプレイします</h2>
        <iframe id="sparebeat" width="960" height="640" src="https://sparebeat.com/embed/" frameborder="0"></iframe>
        <script src="https://sparebeat.com/embed/api.js"></script>
    </div>

    <script src="libs/localforage.js"></script>
    <script>
        const jsonUrl = localStorage.getItem("jsonUrl");

        const musicPromise = localforage.getItem("musicUrl");
        musicPromise.then(value => {
            const musicUrl = value;
            console.log(musicUrl);

            Sparebeat.load(jsonUrl, musicUrl);
            window.addEventListener('load', function () {
                document.getElementById('sparebeat').height = window.outerWidth < 990 ? 1280 : 640;
            });
        });
    </script>
</body>
</html>
